<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT Team å…‘æ¢</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/theme_cny.css') }}">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <div class="falling-blossoms" aria-hidden="true" id="fallingBlossoms"></div>

    <div class="golden-clouds" aria-hidden="true">
        <div class="g-cloud g-cloud-1">â˜</div>
        <div class="g-cloud g-cloud-2">â˜</div>
        <div class="g-cloud g-cloud-3">â˜</div>
    </div>

    <div class="festival-frame" aria-hidden="true"></div>

    <div class="paper-cuts" aria-hidden="true">
        <div class="paper-cut paper-cut-tl">âœ¿</div>
        <div class="paper-cut paper-cut-tr">âœ¿</div>
        <div class="paper-cut paper-cut-bl">âœ¿</div>
        <div class="paper-cut paper-cut-br">âœ¿</div>
    </div>

    <div class="firecrackers" aria-hidden="true">
        <div class="firecracker-string firecracker-left">
            <span class="fc-item"></span><span class="fc-item"></span><span class="fc-item"></span>
            <span class="fc-item"></span><span class="fc-item"></span><span class="fc-item"></span>
        </div>
        <div class="firecracker-string firecracker-right">
            <span class="fc-item"></span><span class="fc-item"></span><span class="fc-item"></span>
            <span class="fc-item"></span><span class="fc-item"></span><span class="fc-item"></span>
        </div>
    </div>

    <div class="gold-ingots" aria-hidden="true">
        <div class="ingot ingot-1">ğŸ¥‡</div>
        <div class="ingot ingot-2">ğŸ’°</div>
        <div class="ingot ingot-3">ğŸ®</div>
        <div class="ingot ingot-4">â­</div>
        <div class="ingot ingot-5">ğŸŠ</div>
    </div>

    <div class="sparkle-field" aria-hidden="true">
        <div class="sparkle-dot sd-1"></div>
        <div class="sparkle-dot sd-2"></div>
        <div class="sparkle-dot sd-3"></div>
        <div class="sparkle-dot sd-4"></div>
        <div class="sparkle-dot sd-5"></div>
        <div class="sparkle-dot sd-6"></div>
        <div class="sparkle-dot sd-7"></div>
        <div class="sparkle-dot sd-8"></div>
    </div>

    <div class="page-lanterns" aria-hidden="true">
        <div class="lantern lantern-left">
            <div class="lantern-line"></div>
            <div class="lantern-ring lantern-ring-top"></div>
            <div class="lantern-body">
                <div class="lantern-glow"></div>
                <span class="lantern-word">æ–°æ˜¥</span>
            </div>
            <div class="lantern-ring lantern-ring-bottom"></div>
            <div class="lantern-tassel">
                <div class="tassel-knot"></div>
                <div class="tassel-fringe"></div>
            </div>
        </div>
        <div class="lantern lantern-right">
            <div class="lantern-line"></div>
            <div class="lantern-ring lantern-ring-top"></div>
            <div class="lantern-body">
                <div class="lantern-glow"></div>
                <span class="lantern-word">å¿«ä¹</span>
            </div>
            <div class="lantern-ring lantern-ring-bottom"></div>
            <div class="lantern-tassel">
                <div class="tassel-knot"></div>
                <div class="tassel-fringe"></div>
            </div>
        </div>
    </div>

    <div class="festival-couplets" aria-hidden="true">
        <div class="couplet-wrapper couplet-left">
            <div class="couplet-inner">
                <div class="couplet couplet-front" id="coupletLeft">æ˜¥å›å¤§åœ°åƒå±±ç§€</div>
                <div class="couplet couplet-back" id="coupletLeftBack">çˆ†ç«¹å£°ä¸­è¾æ—§å²</div>
            </div>
        </div>
        <div class="couplet-wrapper couplet-right">
            <div class="couplet-inner">
                <div class="couplet couplet-front" id="coupletRight">æ—¥æš–ç¥å·ä¸‡ç‰©è£</div>
                <div class="couplet couplet-back" id="coupletRightBack">æ¢…èŠ±é¦™é‡ŒæŠ¥æ–°æ˜¥</div>
            </div>
        </div>
        <div class="crossbeam-wrapper">
            <div class="crossbeam-inner">
                <div class="couplet-crossbeam crossbeam-front" id="coupletCross">æ˜¥æ„ç›ç„¶</div>
                <div class="couplet-crossbeam crossbeam-back" id="coupletCrossBack">ä¸‡è±¡æ›´æ–°</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-fu" aria-hidden="true">ç¦</div>
            <h1><i data-lucide="gift" style="width:32px;height:32px;vertical-align:-4px;margin-right:4px;"></i> GPT Team å…‘æ¢</h1>
            <p class="subtitle">âœ¨ æ–°æ˜¥å–œè¿ Â· ä½¿ç”¨å…‘æ¢ç åŠ å…¥ ChatGPT Team âœ¨</p>
            <div class="newyear-chip">ğŸ´ é©¬å¹´å¤§å‰</div>

            {% if remaining_spots is not none %}
            <div class="spots-badge">
                <i data-lucide="users"></i> å‰©ä½™è½¦ä½: {{ remaining_spots }}
            </div>
            {% endif %}
        </div>

        <div class="tab-switcher">
            <button class="tab-btn active" type="button" onclick="switchTab('redeem')" id="tab-redeem">
                <i data-lucide="gift"></i> å…‘æ¢ç å…‘æ¢
            </button>
            <button class="tab-btn" type="button" onclick="switchTab('warranty')" id="tab-warranty">
                <i data-lucide="shield-check"></i> è´¨ä¿æŸ¥è¯¢
            </button>
        </div>

        <div id="step1" class="step active">
            <div class="card redeem-card">
                <div class="card-header-strip">
                    <div class="card-header-icon"><i data-lucide="gift"></i></div>
                    <div>
                        <h2>è¾“å…¥å…‘æ¢ä¿¡æ¯</h2>
                        <p class="card-header-sub">å¡«å†™é‚®ç®±å’Œå…‘æ¢ç ï¼Œå³å¯åŠ å…¥ ChatGPT Team</p>
                    </div>
                </div>
                <form id="verifyForm">
                    <div class="form-group">
                        <label for="email"><i data-lucide="mail" style="width:14px;height:14px;vertical-align:-2px;margin-right:4px;"></i>é‚®ç®±åœ°å€</label>
                        <div class="input-wrapper">
                            <input type="email" id="email" name="email" required placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€" class="form-input">
                        </div>
                        <p class="form-help">é‚€è¯·å°†å‘é€åˆ°æ­¤é‚®ç®±ï¼Œè¯·ç¡®ä¿å¯æ­£å¸¸æ¥æ”¶</p>
                    </div>
                    <div class="form-group">
                        <label for="code"><i data-lucide="key-round" style="width:14px;height:14px;vertical-align:-2px;margin-right:4px;"></i>å…‘æ¢ç </label>
                        <div class="input-wrapper">
                            <input type="text" id="code" name="code" required placeholder="è¯·è¾“å…¥å…‘æ¢ç " class="form-input">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="verifyBtn">
                        <i data-lucide="arrow-right-circle"></i> éªŒè¯å…‘æ¢ç 
                    </button>
                </form>
            </div>
        </div>

        <div id="warrantyPanel" class="step" style="display: none;">
            <div class="card warranty-card">
                <div class="card-header-strip">
                    <div class="card-header-icon warranty-icon"><i data-lucide="shield-check"></i></div>
                    <div>
                        <h2>è´¨ä¿æŸ¥è¯¢</h2>
                        <p class="card-header-sub">å°å·åå¯å‡­åŸå…‘æ¢ç é‡æ–°åŠ å…¥ Team</p>
                    </div>
                </div>
                <div class="warranty-tip">
                    <div class="warranty-tip-icon">ğŸ›¡ï¸</div>
                    <div class="warranty-tip-text">å¦‚æœæ‚¨ä½¿ç”¨<strong>è´¨ä¿å…‘æ¢ç </strong>åŠ å…¥çš„ Team è¢«å°å·ï¼Œå¯ä»¥åœ¨è´¨ä¿æœŸå†…é‡å¤ä½¿ç”¨åŸå…‘æ¢ç é‡æ–°åŠ å…¥ã€‚</div>
                </div>
                <div class="form-group">
                    <label for="warrantyInput"><i data-lucide="search" style="width:14px;height:14px;vertical-align:-2px;margin-right:4px;"></i>å…‘æ¢ç æˆ–é‚®ç®±</label>
                    <div class="input-wrapper">
                        <input type="text" id="warrantyInput" placeholder="è¯·è¾“å…¥åŸå…‘æ¢ç æˆ–é‚®ç®±è¿›è¡ŒæŸ¥è¯¢" class="form-input">
                    </div>
                </div>
                <button type="button" class="btn btn-primary" id="checkWarrantyBtn" onclick="checkWarranty()">
                    <i data-lucide="search"></i> æŸ¥è¯¢è´¨ä¿çŠ¶æ€
                </button>
                <div id="warrantyContent" style="margin-top: 1.25rem;">
                    <p class="form-help">æŸ¥è¯¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚</p>
                </div>
            </div>
        </div>

        <div id="step2" class="step" style="display: none;">
            <div class="card">
                <h2>é€‰æ‹© Team</h2>
                <div id="teamsList" class="teams-list"></div>
                <div class="actions">
                    <button onclick="backToStep1()" class="btn btn-secondary">è¿”å›</button>
                    <button onclick="autoSelectTeam()" class="btn btn-primary">è‡ªåŠ¨é€‰æ‹©</button>
                </div>
            </div>
        </div>

        <div id="step3" class="step">
            <div class="card">
                <div id="resultContent"></div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="{{ url_for('static', path='/js/redeem.js') }}"></script>
    <script>
        (function initCnyVisuals() {
            if (window.lucide) {
                lucide.createIcons();
            }

            var coupletSets = [
                { left: 'æ˜¥å›å¤§åœ°åƒå±±ç§€', right: 'æ—¥æš–ç¥å·ä¸‡ç‰©è£', cross: 'æ˜¥æ„ç›ç„¶' },
                { left: 'çˆ†ç«¹å£°ä¸­è¾æ—§å²', right: 'æ¢…èŠ±é¦™é‡ŒæŠ¥æ–°æ˜¥', cross: 'ä¸‡è±¡æ›´æ–°' },
                { left: 'ä¸€å¸†é£é¡ºå¹´å¹´å¥½', right: 'ä¸‡äº‹å¦‚æ„æ­¥æ­¥é«˜', cross: 'å‰æ˜Ÿé«˜ç…§' },
                { left: 'ç¦æ—ºè´¢æ—ºè¿æ°”æ—º', right: 'å®¶å…´äººå…´äº‹ä¸šå…´', cross: 'ä¸‡äº‹äº¨é€š' }
            ];

            var idx = 0;
            setInterval(function () {
                idx = (idx + 1) % coupletSets.length;
                var item = coupletSets[idx];
                var left = document.getElementById('coupletLeft');
                var right = document.getElementById('coupletRight');
                var cross = document.getElementById('coupletCross');
                if (left) left.textContent = item.left;
                if (right) right.textContent = item.right;
                if (cross) cross.textContent = item.cross;
            }, 8000);

            var blossoms = document.getElementById('fallingBlossoms');
            if (!blossoms) return;

            var symbols = ['ğŸŒ¸', 'âœ¿', 'â€', 'ğŸµ', 'ğŸ’®'];
            function spawnBlossom() {
                var node = document.createElement('span');
                node.className = 'phys-particle';
                node.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                node.style.left = Math.floor(Math.random() * 100) + 'vw';
                node.style.top = '-10vh';
                node.style.opacity = (0.25 + Math.random() * 0.6).toFixed(2);
                node.style.fontSize = (14 + Math.random() * 14).toFixed(1) + 'px';
                node.style.position = 'absolute';
                node.style.willChange = 'transform, opacity';
                blossoms.appendChild(node);
                var duration = Math.floor(8000 + Math.random() * 8000);
                var drift = (Math.random() * 220 - 110).toFixed(1);
                var rotation = Math.floor(Math.random() * 1080 - 540);
                node.animate([
                    { transform: 'translate3d(0, -10vh, 0) rotate(0deg)', opacity: 0.85 },
                    { transform: 'translate3d(' + drift + 'px, 110vh, 0) rotate(' + rotation + 'deg)', opacity: 0.1 }
                ], {
                    duration: duration,
                    easing: 'linear',
                    fill: 'forwards'
                });
                setTimeout(function () { node.remove(); }, duration + 150);
            }

            for (var i = 0; i < 8; i++) {
                setTimeout(spawnBlossom, i * 300);
            }
            setInterval(spawnBlossom, 900);
        })();
    </script>
</body>

</html>
